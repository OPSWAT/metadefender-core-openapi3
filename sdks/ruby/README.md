# openapi_client

OpenapiClient - the Ruby gem for the MetaDefender Core

## Developer Guide
This is the API documentation for *MetaDefender Core Public API*.  If you would like to evaluate or have any questions about this documentation, please contact us via our [Contact Us](https://opswat.com/contact) form. 
## How to Interact with MetaDefender Core using REST
Beginning with MetaDefender Core 4.x, OPSWAT recommends using the JSON-based REST API. The available methods are documented below.
> _**Note**:_ MetaDefender API doesn't support chunk upload, however is recommended to stream the files to MetaDefender as part of the upload process. 
---
## File Analysis Process

  MetaDefender's main functionality is to analyze large volumes with a high throughput. Depending on the configuration and licensed technologies, the analysis times can vary. 
  Below is a brief description of the API integration flow:

  1. Upload a file for analysis (`POST /file`), which returns the `data_id`: [File Analysis](#operation/fileAnalysisPost)). 
    
    > _**Note**:_ The performance depends on:      
    > - number of nodes (scaling)
    > - number of engines per node
    > - type of file to be scanned
    > - Metadefender Core and nodes' hardware
  

  2. You have 2 ways to retrieve the analysis report: 
    - **Polling**: Fetch the result with previously received data_id (`GET /file/{data_id}` resource) until scan result belonging to data_id doesn't reach the 100 percent progress_percentage: ( [Fetch processing result](#operation/userLogin))
  
    > _**Note**:_ Too many data_id requests can reduce performance. It is enough to just check every few hundred milliseconds.
    
    - **Callbackurl**: Specify a callbackurl that will be called once the analysis is complete. 

  3. Retrieve the analysis results anytime after the analysis is completed with hash for files (md5, sha1, sha256) by calling [Fetch processing result](#operation/userLogin). 
    - The hash can be found in the scan results

  4. Retrieve processed file (sanitized, redacted, watermarked, etc.) after the analysis is complete. 
    > _**Note**:_ Based on the configured retention policy, the files might be available for retrieval at a later time. 

---
OPSWAT provides some sample codes on [GitHub](https://github.com/OPSWAT) to make it easier to understand how the MetaDefender REST API works.


This SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: v4.18.0
- Package version: 1.0.0
- Build package: org.openapitools.codegen.languages.RubyClientCodegen
For more information, please visit [https://github.com/OPSWAT/metadefender-core-openapi3](https://github.com/OPSWAT/metadefender-core-openapi3)

## Installation

### Build a gem

To build the Ruby code into a gem:

```shell
gem build openapi_client.gemspec
```

Then either install the gem locally:

```shell
gem install ./openapi_client-1.0.0.gem
```

(for development, run `gem install --dev ./openapi_client-1.0.0.gem` to install the development dependencies)

or publish the gem to a gem hosting service, e.g. [RubyGems](https://rubygems.org/).

Finally add this to the Gemfile:

    gem 'openapi_client', '~> 1.0.0'

### Install from Git

If the Ruby gem is hosted at a git repository: https://github.com/GIT_USER_ID/GIT_REPO_ID, then add the following in the Gemfile:

    gem 'openapi_client', :git => 'https://github.com/GIT_USER_ID/GIT_REPO_ID.git'

### Include the Ruby code directly

Include the Ruby code directly using `-I` as follows:

```shell
ruby -Ilib script.rb
```

## Getting Started

Please follow the [installation](#installation) procedure and then run the following code:

```ruby
# Load the gem
require 'openapi_client'

# Setup authorization
OpenapiClient.configure do |config|
  # Configure API key authorization: apikey
  config.api_key['apikey'] = 'YOUR API KEY'
  # Uncomment the following line to set a prefix for the API key, e.g. 'Bearer' (defaults to nil)
  #config.api_key_prefix['apikey'] = 'Bearer'
end

api_instance = OpenapiClient::AdminApi.new
opts = {
  apikey: 'apikey_example', # String | Generated `session_id` from [Login](#operation/userLogin) call can be used as an `apikey` for API calls that require authentication.                
  body: File.new('/path/to/file') # File | 
}

begin
  #Import configuration
  result = api_instance.admin_import(opts)
  p result
rescue OpenapiClient::ApiError => e
  puts "Exception when calling AdminApi->admin_import: #{e}"
end

```

## Documentation for API Endpoints

All URIs are relative to *http://localhost:8008*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*OpenapiClient::AdminApi* | [**admin_import**](docs/AdminApi.md#admin_import) | **POST** /admin/import | Import configuration
*OpenapiClient::AdminApi* | [**role_create**](docs/AdminApi.md#role_create) | **POST** /admin/role | Create new role
*OpenapiClient::AdminApi* | [**user_create**](docs/AdminApi.md#user_create) | **POST** /admin/user | Create user
*OpenapiClient::AnalysisApi* | [**analysis_rules**](docs/AnalysisApi.md#analysis_rules) | **GET** /file/rules | Fetching Available Analysis Rules
*OpenapiClient::AnalysisApi* | [**file_analysis_cancel**](docs/AnalysisApi.md#file_analysis_cancel) | **POST** /file/{data_id}/cancel | Cancel File Analysis
*OpenapiClient::AnalysisApi* | [**file_analysis_get**](docs/AnalysisApi.md#file_analysis_get) | **GET** /file/{data_id} | Fetch Analysis Result
*OpenapiClient::AnalysisApi* | [**file_analysis_post**](docs/AnalysisApi.md#file_analysis_post) | **POST** /file | Analyze File
*OpenapiClient::AnalysisApi* | [**sanitized_file**](docs/AnalysisApi.md#sanitized_file) | **GET** /file/converted/{data_id} | Download Sanitized Files
*OpenapiClient::AnalysisApi* | [**webhook_status**](docs/AnalysisApi.md#webhook_status) | **GET** /file/webhook/{data_id} | Query webhook status
*OpenapiClient::AuthApi* | [**user_change_pass**](docs/AuthApi.md#user_change_pass) | **POST** /user/changepassword | Change Password
*OpenapiClient::AuthApi* | [**user_login**](docs/AuthApi.md#user_login) | **POST** /login | Login
*OpenapiClient::AuthApi* | [**user_logout**](docs/AuthApi.md#user_logout) | **POST** /logout | Logout
*OpenapiClient::BatchApi* | [**batch_cancel**](docs/BatchApi.md#batch_cancel) | **POST** /file/{batchId}/cancel | Cancel Batch
*OpenapiClient::BatchApi* | [**batch_close**](docs/BatchApi.md#batch_close) | **POST** /file/batch/{batchId}/close | Close Batch
*OpenapiClient::BatchApi* | [**batch_create**](docs/BatchApi.md#batch_create) | **POST** /file/batch | Initiate Batch
*OpenapiClient::BatchApi* | [**batch_signed_result**](docs/BatchApi.md#batch_signed_result) | **GET** /file/batch/{batchId}/certificate | Download Signed Batch Result
*OpenapiClient::BatchApi* | [**batch_status**](docs/BatchApi.md#batch_status) | **GET** /file/batch/{batchId} | Status of Batch Analysis
*OpenapiClient::ConfigApi* | [**config_audit_log**](docs/ConfigApi.md#config_audit_log) | **PUT** /admin/config/auditlog | Audit clean up
*OpenapiClient::ConfigApi* | [**config_get_skip_hash**](docs/ConfigApi.md#config_get_skip_hash) | **GET** /admin/config/skip | Get 'skip by hash' list
*OpenapiClient::ConfigApi* | [**config_quarantine**](docs/ConfigApi.md#config_quarantine) | **PUT** /admin/config/quarantine | Quarantine clean up
*OpenapiClient::ConfigApi* | [**config_sanitized_repo**](docs/ConfigApi.md#config_sanitized_repo) | **PUT** /admin/config/sanitize | Sanitized files clean up
*OpenapiClient::ConfigApi* | [**config_scan_history**](docs/ConfigApi.md#config_scan_history) | **PUT** /admin/config/scanhistory | Processing history clean up
*OpenapiClient::ConfigApi* | [**config_session**](docs/ConfigApi.md#config_session) | **PUT** /admin/config/session | Session settings
*OpenapiClient::ConfigApi* | [**config_update**](docs/ConfigApi.md#config_update) | **PUT** /admin/config/update | Modules Update Source and Frequency
*OpenapiClient::ConfigApi* | [**config_update_skip_hash**](docs/ConfigApi.md#config_update_skip_hash) | **PUT** /admin/config/skip | Modify 'skip by hash' list
*OpenapiClient::ConfigApi* | [**config_update_webhook**](docs/ConfigApi.md#config_update_webhook) | **PUT** /admin/config/webhook | Webhook set configuration
*OpenapiClient::ConfigApi* | [**config_webhook**](docs/ConfigApi.md#config_webhook) | **GET** /admin/config/webhook | Webhook get configuration
*OpenapiClient::EnginesApi* | [**engine_disable**](docs/EnginesApi.md#engine_disable) | **POST** /admin/engine/{engineId}/disable | Disable engines
*OpenapiClient::EnginesApi* | [**engine_enable**](docs/EnginesApi.md#engine_enable) | **POST** /admin/engine/{engineId}/enable | Enable engines
*OpenapiClient::EnginesApi* | [**engine_pin**](docs/EnginesApi.md#engine_pin) | **POST** /admin/engine/{engineId}/pin | Pin engine to prevent auto-updates
*OpenapiClient::EnginesApi* | [**engine_unpin**](docs/EnginesApi.md#engine_unpin) | **POST** /admin/engine/{engineId}/unpin | Unpin engine to prevent auto-updates
*OpenapiClient::LicenseApi* | [**license_activation**](docs/LicenseApi.md#license_activation) | **POST** /admin/license/activation | Activate license
*OpenapiClient::LicenseApi* | [**license_get**](docs/LicenseApi.md#license_get) | **GET** /admin/license | Get Current License Information
*OpenapiClient::LicenseApi* | [**license_upload**](docs/LicenseApi.md#license_upload) | **POST** /admin/license | Upload license key
*OpenapiClient::StatsApi* | [**engines_status**](docs/StatsApi.md#engines_status) | **GET** /stat/engines | Engines Status
*OpenapiClient::StatsApi* | [**nodes_status**](docs/StatsApi.md#nodes_status) | **GET** /stat/nodes | Nodes Status
*OpenapiClient::StatsApi* | [**product_version**](docs/StatsApi.md#product_version) | **GET** /version | Get Product Version
*OpenapiClient::YaraApi* | [**yara_package_generate**](docs/YaraApi.md#yara_package_generate) | **PUT** /yara/generate | Generate Yara package
*OpenapiClient::YaraApi* | [**yara_package_status**](docs/YaraApi.md#yara_package_status) | **GET** /yara/package | Yara Generation Status
*OpenapiClient::YaraApi* | [**yara_sources_get**](docs/YaraApi.md#yara_sources_get) | **GET** /admin/config/yara/sources | Get Yara sources
*OpenapiClient::YaraApi* | [**yara_sources_put**](docs/YaraApi.md#yara_sources_put) | **PUT** /admin/config/yara/sources | Modify Yara sources


## Documentation for Models

 - [OpenapiClient::AVEngineScanReport](docs/AVEngineScanReport.md)
 - [OpenapiClient::AdminConfigSession](docs/AdminConfigSession.md)
 - [OpenapiClient::AdminConfigUpdate](docs/AdminConfigUpdate.md)
 - [OpenapiClient::AdminConfigUpdateDisabledupdate](docs/AdminConfigUpdateDisabledupdate.md)
 - [OpenapiClient::AdminConfigWebhook](docs/AdminConfigWebhook.md)
 - [OpenapiClient::AnalysisResult](docs/AnalysisResult.md)
 - [OpenapiClient::AnalysisResultProcessInfo](docs/AnalysisResultProcessInfo.md)
 - [OpenapiClient::AnalysisResultProcessInfoPostProcessing](docs/AnalysisResultProcessInfoPostProcessing.md)
 - [OpenapiClient::BatchId](docs/BatchId.md)
 - [OpenapiClient::BatchResponse](docs/BatchResponse.md)
 - [OpenapiClient::BatchResponseBatchFiles](docs/BatchResponseBatchFiles.md)
 - [OpenapiClient::BatchResponseBatchFilesFilesInBatch](docs/BatchResponseBatchFilesFilesInBatch.md)
 - [OpenapiClient::BatchResponseBatchFilesProcessInfo](docs/BatchResponseBatchFilesProcessInfo.md)
 - [OpenapiClient::BatchResponseProcessInfo](docs/BatchResponseProcessInfo.md)
 - [OpenapiClient::BatchResponseScanResults](docs/BatchResponseScanResults.md)
 - [OpenapiClient::DLPResponse](docs/DLPResponse.md)
 - [OpenapiClient::DLPResponseDlpInfo](docs/DLPResponseDlpInfo.md)
 - [OpenapiClient::DLPResponseDlpInfoHits](docs/DLPResponseDlpInfoHits.md)
 - [OpenapiClient::DLPResponseDlpInfoHitsCcn](docs/DLPResponseDlpInfoHitsCcn.md)
 - [OpenapiClient::DLPResponseDlpInfoMetadataRemoval](docs/DLPResponseDlpInfoMetadataRemoval.md)
 - [OpenapiClient::DLPResponseDlpInfoRedact](docs/DLPResponseDlpInfoRedact.md)
 - [OpenapiClient::DLPResponseDlpInfoWatermark](docs/DLPResponseDlpInfoWatermark.md)
 - [OpenapiClient::DLPRuleMatchResult](docs/DLPRuleMatchResult.md)
 - [OpenapiClient::DeepCDRDetails](docs/DeepCDRDetails.md)
 - [OpenapiClient::DeepCDRDetailsDetails](docs/DeepCDRDetailsDetails.md)
 - [OpenapiClient::FileInformation](docs/FileInformation.md)
 - [OpenapiClient::InlineObject](docs/InlineObject.md)
 - [OpenapiClient::InlineObject1](docs/InlineObject1.md)
 - [OpenapiClient::InlineObject2](docs/InlineObject2.md)
 - [OpenapiClient::InlineResponse200](docs/InlineResponse200.md)
 - [OpenapiClient::InlineResponse2001](docs/InlineResponse2001.md)
 - [OpenapiClient::InlineResponse20010](docs/InlineResponse20010.md)
 - [OpenapiClient::InlineResponse20011](docs/InlineResponse20011.md)
 - [OpenapiClient::InlineResponse20012](docs/InlineResponse20012.md)
 - [OpenapiClient::InlineResponse20013](docs/InlineResponse20013.md)
 - [OpenapiClient::InlineResponse2002](docs/InlineResponse2002.md)
 - [OpenapiClient::InlineResponse2003](docs/InlineResponse2003.md)
 - [OpenapiClient::InlineResponse2004](docs/InlineResponse2004.md)
 - [OpenapiClient::InlineResponse2005](docs/InlineResponse2005.md)
 - [OpenapiClient::InlineResponse2006](docs/InlineResponse2006.md)
 - [OpenapiClient::InlineResponse2007](docs/InlineResponse2007.md)
 - [OpenapiClient::InlineResponse2007Issues](docs/InlineResponse2007Issues.md)
 - [OpenapiClient::InlineResponse2007IssuesGeneral](docs/InlineResponse2007IssuesGeneral.md)
 - [OpenapiClient::InlineResponse2007IssuesSource](docs/InlineResponse2007IssuesSource.md)
 - [OpenapiClient::InlineResponse2008](docs/InlineResponse2008.md)
 - [OpenapiClient::InlineResponse2009](docs/InlineResponse2009.md)
 - [OpenapiClient::InlineResponse400](docs/InlineResponse400.md)
 - [OpenapiClient::InlineResponse403](docs/InlineResponse403.md)
 - [OpenapiClient::InlineResponse500](docs/InlineResponse500.md)
 - [OpenapiClient::LicenseInformation](docs/LicenseInformation.md)
 - [OpenapiClient::MetascanReport](docs/MetascanReport.md)
 - [OpenapiClient::MetascanReportScanDetails](docs/MetascanReportScanDetails.md)
 - [OpenapiClient::NewUserRoleRequest](docs/NewUserRoleRequest.md)
 - [OpenapiClient::NewUserRoleRequestRights](docs/NewUserRoleRequestRights.md)
 - [OpenapiClient::NewUserRoleResponse](docs/NewUserRoleResponse.md)
 - [OpenapiClient::NewUserRoleResponseAllOf](docs/NewUserRoleResponseAllOf.md)
 - [OpenapiClient::ProcessingResultsIndexEnum](docs/ProcessingResultsIndexEnum.md)
 - [OpenapiClient::ProcessingResultsStringEnum](docs/ProcessingResultsStringEnum.md)
 - [OpenapiClient::RolePermissionObject](docs/RolePermissionObject.md)
 - [OpenapiClient::ScanResultEnum](docs/ScanResultEnum.md)
 - [OpenapiClient::SkipList](docs/SkipList.md)
 - [OpenapiClient::StatNodesEngines](docs/StatNodesEngines.md)
 - [OpenapiClient::StatNodesIssues](docs/StatNodesIssues.md)
 - [OpenapiClient::StatNodesStatuses](docs/StatNodesStatuses.md)
 - [OpenapiClient::UserLogin](docs/UserLogin.md)
 - [OpenapiClient::UserRequest](docs/UserRequest.md)
 - [OpenapiClient::UserRequestAllOf](docs/UserRequestAllOf.md)
 - [OpenapiClient::UserResponse](docs/UserResponse.md)
 - [OpenapiClient::VulnerabilityResponse](docs/VulnerabilityResponse.md)
 - [OpenapiClient::VulnerabilityResponseResult](docs/VulnerabilityResponseResult.md)
 - [OpenapiClient::VulnerabilityResponseResultDetails](docs/VulnerabilityResponseResultDetails.md)
 - [OpenapiClient::VulnerabilityResponseResultDetailsCvss](docs/VulnerabilityResponseResultDetailsCvss.md)
 - [OpenapiClient::VulnerabilityResponseResultDetectedProduct](docs/VulnerabilityResponseResultDetectedProduct.md)
 - [OpenapiClient::VulnerabilityResponseResultDetectedProductProduct](docs/VulnerabilityResponseResultDetectedProductProduct.md)
 - [OpenapiClient::VulnerabilityResponseResultDetectedProductVendor](docs/VulnerabilityResponseResultDetectedProductVendor.md)
 - [OpenapiClient::VulnerabilityResponseResultDetectedProductVersionData](docs/VulnerabilityResponseResultDetectedProductVersionData.md)
 - [OpenapiClient::VulnerabilityResponseResultVulnerabilites](docs/VulnerabilityResponseResultVulnerabilites.md)
 - [OpenapiClient::YaraReport](docs/YaraReport.md)
 - [OpenapiClient::YaraSourcesObject](docs/YaraSourcesObject.md)
 - [OpenapiClient::YaraSourcesObjectHttpSources](docs/YaraSourcesObjectHttpSources.md)
 - [OpenapiClient::YaraSourcesObjectLocalSources](docs/YaraSourcesObjectLocalSources.md)


## Documentation for Authorization


### apikey


- **Type**: API key
- **API key parameter name**: apikey
- **Location**: HTTP header

