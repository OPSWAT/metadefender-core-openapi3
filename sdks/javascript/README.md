# meta_defender_core

MetaDefenderCore - JavaScript client for meta_defender_core
## Developer Guide
This is the API documentation for *MetaDefender Core Public API*.  If you would like to evaluate or have any questions about this documentation, please contact us via our [Contact Us](https://opswat.com/contact) form. 
## How to Interact with MetaDefender Core using REST
Beginning with MetaDefender Core 4.x, OPSWAT recommends using the JSON-based REST API. The available methods are documented below.
> _**Note**:_ MetaDefender API doesn't support chunk upload, however is recommended to stream the files to MetaDefender as part of the upload process. 
---
## File Analysis Process

  MetaDefender's main functionality is to analyze large volumes with a high throughput. Depending on the configuration and licensed technologies, the analysis times can vary. 
  Below is a brief description of the API integration flow:

  1. Upload a file for analysis (`POST /file`), which returns the `data_id`: [File Analysis](#operation/fileAnalysisPost)). 
    
    > _**Note**:_ The performance depends on:      
    > - number of nodes (scaling)
    > - number of engines per node
    > - type of file to be scanned
    > - Metadefender Core and nodes' hardware
  

  2. You have 2 ways to retrieve the analysis report: 
    - **Polling**: Fetch the result with previously received data_id (`GET /file/{data_id}` resource) until scan result belonging to data_id doesn't reach the 100 percent progress_percentage: ( [Fetch processing result](#operation/userLogin))
  
    > _**Note**:_ Too many data_id requests can reduce performance. It is enough to just check every few hundred milliseconds.
    
    - **Callbackurl**: Specify a callbackurl that will be called once the analysis is complete. 

  3. Retrieve the analysis results anytime after the analysis is completed with hash for files (md5, sha1, sha256) by calling [Fetch processing result](#operation/userLogin). 
    - The hash can be found in the scan results

  4. Retrieve processed file (sanitized, redacted, watermarked, etc.) after the analysis is complete. 
    > _**Note**:_ Based on the configured retention policy, the files might be available for retrieval at a later time. 

---
OPSWAT provides some sample codes on [GitHub](https://github.com/OPSWAT) to make it easier to understand how the MetaDefender REST API works.

This SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: v4.18.0
- Package version: v4.18.0
- Build package: org.openapitools.codegen.languages.JavascriptClientCodegen
For more information, please visit [https://github.com/OPSWAT/metadefender-core-openapi3](https://github.com/OPSWAT/metadefender-core-openapi3)

## Installation

### For [Node.js](https://nodejs.org/)

#### npm

To publish the library as a [npm](https://www.npmjs.com/), please follow the procedure in ["Publishing npm packages"](https://docs.npmjs.com/getting-started/publishing-npm-packages).

Then install it via:

```shell
npm install meta_defender_core --save
```

Finally, you need to build the module:

```shell
npm run build
```

##### Local development

To use the library locally without publishing to a remote npm registry, first install the dependencies by changing into the directory containing `package.json` (and this README). Let's call this `JAVASCRIPT_CLIENT_DIR`. Then run:

```shell
npm install
```

Next, [link](https://docs.npmjs.com/cli/link) it globally in npm with the following, also from `JAVASCRIPT_CLIENT_DIR`:

```shell
npm link
```

To use the link you just defined in your project, switch to the directory you want to use your meta_defender_core from, and run:

```shell
npm link /path/to/<JAVASCRIPT_CLIENT_DIR>
```

Finally, you need to build the module:

```shell
npm run build
```

#### git

If the library is hosted at a git repository, e.g.https://github.com/GIT_USER_ID/GIT_REPO_ID
then install it via:

```shell
    npm install GIT_USER_ID/GIT_REPO_ID --save
```

### For browser

The library also works in the browser environment via npm and [browserify](http://browserify.org/). After following
the above steps with Node.js and installing browserify with `npm install -g browserify`,
perform the following (assuming *main.js* is your entry file):

```shell
browserify main.js > bundle.js
```

Then include *bundle.js* in the HTML pages.

### Webpack Configuration

Using Webpack you may encounter the following error: "Module not found: Error:
Cannot resolve module", most certainly you should disable AMD loader. Add/merge
the following section to your webpack config:

```javascript
module: {
  rules: [
    {
      parser: {
        amd: false
      }
    }
  ]
}
```

## Getting Started

Please follow the [installation](#installation) instruction and execute the following JS code:

```javascript
var MetaDefenderCore = require('meta_defender_core');

var defaultClient = MetaDefenderCore.ApiClient.instance;
// Configure API key authorization: apikey
var apikey = defaultClient.authentications['apikey'];
apikey.apiKey = "YOUR API KEY"
// Uncomment the following line to set a prefix for the API key, e.g. "Token" (defaults to null)
//apikey.apiKeyPrefix['apikey'] = "Token"

var api = new MetaDefenderCore.AdminApi()
var opts = {
  'apikey': "apikey_example", // {String} Generated `session_id` from [Login](#operation/userLogin) call can be used as an `apikey` for API calls that require authentication.                
  'body': "body_example" // {File} 
};
var callback = function(error, data, response) {
  if (error) {
    console.error(error);
  } else {
    console.log('API called successfully. Returned data: ' + data);
  }
};
api.adminImport(opts, callback);

```

## Documentation for API Endpoints

All URIs are relative to *http://localhost:8008*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*MetaDefenderCore.AdminApi* | [**adminImport**](docs/AdminApi.md#adminImport) | **POST** /admin/import | Import configuration
*MetaDefenderCore.AdminApi* | [**roleCreate**](docs/AdminApi.md#roleCreate) | **POST** /admin/role | Create new role
*MetaDefenderCore.AdminApi* | [**userCreate**](docs/AdminApi.md#userCreate) | **POST** /admin/user | Create user
*MetaDefenderCore.AnalysisApi* | [**analysisRules**](docs/AnalysisApi.md#analysisRules) | **GET** /file/rules | Fetching Available Analysis Rules
*MetaDefenderCore.AnalysisApi* | [**fileAnalysisCancel**](docs/AnalysisApi.md#fileAnalysisCancel) | **POST** /file/{data_id}/cancel | Cancel File Analysis
*MetaDefenderCore.AnalysisApi* | [**fileAnalysisGet**](docs/AnalysisApi.md#fileAnalysisGet) | **GET** /file/{data_id} | Fetch Analysis Result
*MetaDefenderCore.AnalysisApi* | [**fileAnalysisPost**](docs/AnalysisApi.md#fileAnalysisPost) | **POST** /file | Analyze File
*MetaDefenderCore.AnalysisApi* | [**sanitizedFile**](docs/AnalysisApi.md#sanitizedFile) | **GET** /file/converted/{data_id} | Download Sanitized Files
*MetaDefenderCore.AnalysisApi* | [**webhookStatus**](docs/AnalysisApi.md#webhookStatus) | **GET** /file/webhook/{data_id} | Query webhook status
*MetaDefenderCore.AuthApi* | [**userChangePass**](docs/AuthApi.md#userChangePass) | **POST** /user/changepassword | Change Password
*MetaDefenderCore.AuthApi* | [**userLogin**](docs/AuthApi.md#userLogin) | **POST** /login | Login
*MetaDefenderCore.AuthApi* | [**userLogout**](docs/AuthApi.md#userLogout) | **POST** /logout | Logout
*MetaDefenderCore.BatchApi* | [**batchCancel**](docs/BatchApi.md#batchCancel) | **POST** /file/{batchId}/cancel | Cancel Batch
*MetaDefenderCore.BatchApi* | [**batchClose**](docs/BatchApi.md#batchClose) | **POST** /file/batch/{batchId}/close | Close Batch
*MetaDefenderCore.BatchApi* | [**batchCreate**](docs/BatchApi.md#batchCreate) | **POST** /file/batch | Initiate Batch
*MetaDefenderCore.BatchApi* | [**batchSignedResult**](docs/BatchApi.md#batchSignedResult) | **GET** /file/batch/{batchId}/certificate | Download Signed Batch Result
*MetaDefenderCore.BatchApi* | [**batchStatus**](docs/BatchApi.md#batchStatus) | **GET** /file/batch/{batchId} | Status of Batch Analysis
*MetaDefenderCore.ConfigApi* | [**configAuditLog**](docs/ConfigApi.md#configAuditLog) | **PUT** /admin/config/auditlog | Audit clean up
*MetaDefenderCore.ConfigApi* | [**configGetSkipHash**](docs/ConfigApi.md#configGetSkipHash) | **GET** /admin/config/skip | Get &#39;skip by hash&#39; list
*MetaDefenderCore.ConfigApi* | [**configQuarantine**](docs/ConfigApi.md#configQuarantine) | **PUT** /admin/config/quarantine | Quarantine clean up
*MetaDefenderCore.ConfigApi* | [**configSanitizedRepo**](docs/ConfigApi.md#configSanitizedRepo) | **PUT** /admin/config/sanitize | Sanitized files clean up
*MetaDefenderCore.ConfigApi* | [**configScanHistory**](docs/ConfigApi.md#configScanHistory) | **PUT** /admin/config/scanhistory | Processing history clean up
*MetaDefenderCore.ConfigApi* | [**configSession**](docs/ConfigApi.md#configSession) | **PUT** /admin/config/session | Session settings
*MetaDefenderCore.ConfigApi* | [**configUpdate**](docs/ConfigApi.md#configUpdate) | **PUT** /admin/config/update | Modules Update Source and Frequency
*MetaDefenderCore.ConfigApi* | [**configUpdateSkipHash**](docs/ConfigApi.md#configUpdateSkipHash) | **PUT** /admin/config/skip | Modify &#39;skip by hash&#39; list
*MetaDefenderCore.ConfigApi* | [**configUpdateWebhook**](docs/ConfigApi.md#configUpdateWebhook) | **PUT** /admin/config/webhook | Webhook set configuration
*MetaDefenderCore.ConfigApi* | [**configWebhook**](docs/ConfigApi.md#configWebhook) | **GET** /admin/config/webhook | Webhook get configuration
*MetaDefenderCore.EnginesApi* | [**engineDisable**](docs/EnginesApi.md#engineDisable) | **POST** /admin/engine/{engineId}/disable | Disable engines
*MetaDefenderCore.EnginesApi* | [**engineEnable**](docs/EnginesApi.md#engineEnable) | **POST** /admin/engine/{engineId}/enable | Enable engines
*MetaDefenderCore.EnginesApi* | [**enginePin**](docs/EnginesApi.md#enginePin) | **POST** /admin/engine/{engineId}/pin | Pin engine to prevent auto-updates
*MetaDefenderCore.EnginesApi* | [**engineUnpin**](docs/EnginesApi.md#engineUnpin) | **POST** /admin/engine/{engineId}/unpin | Unpin engine to prevent auto-updates
*MetaDefenderCore.LicenseApi* | [**licenseActivation**](docs/LicenseApi.md#licenseActivation) | **POST** /admin/license/activation | Activate license
*MetaDefenderCore.LicenseApi* | [**licenseGet**](docs/LicenseApi.md#licenseGet) | **GET** /admin/license | Get Current License Information
*MetaDefenderCore.LicenseApi* | [**licenseUpload**](docs/LicenseApi.md#licenseUpload) | **POST** /admin/license | Upload license key
*MetaDefenderCore.StatsApi* | [**enginesStatus**](docs/StatsApi.md#enginesStatus) | **GET** /stat/engines | Engines Status
*MetaDefenderCore.StatsApi* | [**nodesStatus**](docs/StatsApi.md#nodesStatus) | **GET** /stat/nodes | Nodes Status
*MetaDefenderCore.StatsApi* | [**productVersion**](docs/StatsApi.md#productVersion) | **GET** /version | Get Product Version
*MetaDefenderCore.YaraApi* | [**yaraPackageGenerate**](docs/YaraApi.md#yaraPackageGenerate) | **PUT** /yara/generate | Generate Yara package
*MetaDefenderCore.YaraApi* | [**yaraPackageStatus**](docs/YaraApi.md#yaraPackageStatus) | **GET** /yara/package | Yara Generation Status
*MetaDefenderCore.YaraApi* | [**yaraSourcesGet**](docs/YaraApi.md#yaraSourcesGet) | **GET** /admin/config/yara/sources | Get Yara sources
*MetaDefenderCore.YaraApi* | [**yaraSourcesPut**](docs/YaraApi.md#yaraSourcesPut) | **PUT** /admin/config/yara/sources | Modify Yara sources


## Documentation for Models

 - [MetaDefenderCore.AVEngineScanReport](docs/AVEngineScanReport.md)
 - [MetaDefenderCore.AdminConfigSession](docs/AdminConfigSession.md)
 - [MetaDefenderCore.AdminConfigUpdate](docs/AdminConfigUpdate.md)
 - [MetaDefenderCore.AdminConfigUpdateDisabledupdate](docs/AdminConfigUpdateDisabledupdate.md)
 - [MetaDefenderCore.AdminConfigWebhook](docs/AdminConfigWebhook.md)
 - [MetaDefenderCore.AnalysisResult](docs/AnalysisResult.md)
 - [MetaDefenderCore.AnalysisResultProcessInfo](docs/AnalysisResultProcessInfo.md)
 - [MetaDefenderCore.AnalysisResultProcessInfoPostProcessing](docs/AnalysisResultProcessInfoPostProcessing.md)
 - [MetaDefenderCore.BatchId](docs/BatchId.md)
 - [MetaDefenderCore.BatchResponse](docs/BatchResponse.md)
 - [MetaDefenderCore.BatchResponseBatchFiles](docs/BatchResponseBatchFiles.md)
 - [MetaDefenderCore.BatchResponseBatchFilesFilesInBatch](docs/BatchResponseBatchFilesFilesInBatch.md)
 - [MetaDefenderCore.BatchResponseBatchFilesProcessInfo](docs/BatchResponseBatchFilesProcessInfo.md)
 - [MetaDefenderCore.BatchResponseProcessInfo](docs/BatchResponseProcessInfo.md)
 - [MetaDefenderCore.BatchResponseScanResults](docs/BatchResponseScanResults.md)
 - [MetaDefenderCore.DLPResponse](docs/DLPResponse.md)
 - [MetaDefenderCore.DLPResponseDlpInfo](docs/DLPResponseDlpInfo.md)
 - [MetaDefenderCore.DLPResponseDlpInfoHits](docs/DLPResponseDlpInfoHits.md)
 - [MetaDefenderCore.DLPResponseDlpInfoHitsCcn](docs/DLPResponseDlpInfoHitsCcn.md)
 - [MetaDefenderCore.DLPResponseDlpInfoMetadataRemoval](docs/DLPResponseDlpInfoMetadataRemoval.md)
 - [MetaDefenderCore.DLPResponseDlpInfoRedact](docs/DLPResponseDlpInfoRedact.md)
 - [MetaDefenderCore.DLPResponseDlpInfoWatermark](docs/DLPResponseDlpInfoWatermark.md)
 - [MetaDefenderCore.DLPRuleMatchResult](docs/DLPRuleMatchResult.md)
 - [MetaDefenderCore.DeepCDRDetails](docs/DeepCDRDetails.md)
 - [MetaDefenderCore.DeepCDRDetailsDetails](docs/DeepCDRDetailsDetails.md)
 - [MetaDefenderCore.FileInformation](docs/FileInformation.md)
 - [MetaDefenderCore.InlineObject](docs/InlineObject.md)
 - [MetaDefenderCore.InlineObject1](docs/InlineObject1.md)
 - [MetaDefenderCore.InlineObject2](docs/InlineObject2.md)
 - [MetaDefenderCore.InlineResponse200](docs/InlineResponse200.md)
 - [MetaDefenderCore.InlineResponse2001](docs/InlineResponse2001.md)
 - [MetaDefenderCore.InlineResponse20010](docs/InlineResponse20010.md)
 - [MetaDefenderCore.InlineResponse20011](docs/InlineResponse20011.md)
 - [MetaDefenderCore.InlineResponse20012](docs/InlineResponse20012.md)
 - [MetaDefenderCore.InlineResponse20013](docs/InlineResponse20013.md)
 - [MetaDefenderCore.InlineResponse2002](docs/InlineResponse2002.md)
 - [MetaDefenderCore.InlineResponse2003](docs/InlineResponse2003.md)
 - [MetaDefenderCore.InlineResponse2004](docs/InlineResponse2004.md)
 - [MetaDefenderCore.InlineResponse2005](docs/InlineResponse2005.md)
 - [MetaDefenderCore.InlineResponse2006](docs/InlineResponse2006.md)
 - [MetaDefenderCore.InlineResponse2007](docs/InlineResponse2007.md)
 - [MetaDefenderCore.InlineResponse2007Issues](docs/InlineResponse2007Issues.md)
 - [MetaDefenderCore.InlineResponse2007IssuesGeneral](docs/InlineResponse2007IssuesGeneral.md)
 - [MetaDefenderCore.InlineResponse2007IssuesSource](docs/InlineResponse2007IssuesSource.md)
 - [MetaDefenderCore.InlineResponse2008](docs/InlineResponse2008.md)
 - [MetaDefenderCore.InlineResponse2009](docs/InlineResponse2009.md)
 - [MetaDefenderCore.InlineResponse400](docs/InlineResponse400.md)
 - [MetaDefenderCore.InlineResponse403](docs/InlineResponse403.md)
 - [MetaDefenderCore.InlineResponse500](docs/InlineResponse500.md)
 - [MetaDefenderCore.LicenseInformation](docs/LicenseInformation.md)
 - [MetaDefenderCore.MetascanReport](docs/MetascanReport.md)
 - [MetaDefenderCore.MetascanReportScanDetails](docs/MetascanReportScanDetails.md)
 - [MetaDefenderCore.NewUserRoleRequest](docs/NewUserRoleRequest.md)
 - [MetaDefenderCore.NewUserRoleRequestRights](docs/NewUserRoleRequestRights.md)
 - [MetaDefenderCore.NewUserRoleResponse](docs/NewUserRoleResponse.md)
 - [MetaDefenderCore.NewUserRoleResponseAllOf](docs/NewUserRoleResponseAllOf.md)
 - [MetaDefenderCore.ProcessingResultsIndexEnum](docs/ProcessingResultsIndexEnum.md)
 - [MetaDefenderCore.ProcessingResultsStringEnum](docs/ProcessingResultsStringEnum.md)
 - [MetaDefenderCore.RolePermissionObject](docs/RolePermissionObject.md)
 - [MetaDefenderCore.ScanResultEnum](docs/ScanResultEnum.md)
 - [MetaDefenderCore.SkipList](docs/SkipList.md)
 - [MetaDefenderCore.StatNodesEngines](docs/StatNodesEngines.md)
 - [MetaDefenderCore.StatNodesIssues](docs/StatNodesIssues.md)
 - [MetaDefenderCore.StatNodesStatuses](docs/StatNodesStatuses.md)
 - [MetaDefenderCore.UserLogin](docs/UserLogin.md)
 - [MetaDefenderCore.UserRequest](docs/UserRequest.md)
 - [MetaDefenderCore.UserRequestAllOf](docs/UserRequestAllOf.md)
 - [MetaDefenderCore.UserResponse](docs/UserResponse.md)
 - [MetaDefenderCore.VulnerabilityResponse](docs/VulnerabilityResponse.md)
 - [MetaDefenderCore.VulnerabilityResponseResult](docs/VulnerabilityResponseResult.md)
 - [MetaDefenderCore.VulnerabilityResponseResultDetails](docs/VulnerabilityResponseResultDetails.md)
 - [MetaDefenderCore.VulnerabilityResponseResultDetailsCvss](docs/VulnerabilityResponseResultDetailsCvss.md)
 - [MetaDefenderCore.VulnerabilityResponseResultDetectedProduct](docs/VulnerabilityResponseResultDetectedProduct.md)
 - [MetaDefenderCore.VulnerabilityResponseResultDetectedProductProduct](docs/VulnerabilityResponseResultDetectedProductProduct.md)
 - [MetaDefenderCore.VulnerabilityResponseResultDetectedProductVendor](docs/VulnerabilityResponseResultDetectedProductVendor.md)
 - [MetaDefenderCore.VulnerabilityResponseResultDetectedProductVersionData](docs/VulnerabilityResponseResultDetectedProductVersionData.md)
 - [MetaDefenderCore.VulnerabilityResponseResultVulnerabilites](docs/VulnerabilityResponseResultVulnerabilites.md)
 - [MetaDefenderCore.YaraReport](docs/YaraReport.md)
 - [MetaDefenderCore.YaraSourcesObject](docs/YaraSourcesObject.md)
 - [MetaDefenderCore.YaraSourcesObjectHttpSources](docs/YaraSourcesObjectHttpSources.md)
 - [MetaDefenderCore.YaraSourcesObjectLocalSources](docs/YaraSourcesObjectLocalSources.md)


## Documentation for Authorization



### apikey


- **Type**: API key
- **API key parameter name**: apikey
- **Location**: HTTP header

