# Org.OpenAPITools - the C# library for the MetaDefender Core

## Developer Guide
This is the API documentation for *MetaDefender Core Public API*.  If you would like to evaluate or have any questions about this documentation, please contact us via our [Contact Us](https://opswat.com/contact) form. 
## How to Interact with MetaDefender Core using REST
Beginning with MetaDefender Core 4.x, OPSWAT recommends using the JSON-based REST API. The available methods are documented below.
> _**Note**:_ MetaDefender API doesn't support chunk upload, however is recommended to stream the files to MetaDefender as part of the upload process. 
- --
## File Analysis Process

  MetaDefender's main functionality is to analyze large volumes with a high throughput. Depending on the configuration and licensed technologies, the analysis times can vary. 
  Below is a brief description of the API integration flow:

  1. Upload a file for analysis (`POST /file`), which returns the `data_id`: [File Analysis](#operation/fileAnalysisPost)). 
    
    > _**Note**:_ The performance depends on:      
    > - number of nodes (scaling)
    > - number of engines per node
    > - type of file to be scanned
    > - Metadefender Core and nodes' hardware
  

  2. You have 2 ways to retrieve the analysis report: 
    - **Polling**: Fetch the result with previously received data_id (`GET /file/{data_id}` resource) until scan result belonging to data_id doesn't reach the 100 percent progress_percentage: ( [Fetch processing result](#operation/userLogin))
  
    > _**Note**:_ Too many data_id requests can reduce performance. It is enough to just check every few hundred milliseconds.
    
    - **Callbackurl**: Specify a callbackurl that will be called once the analysis is complete. 

  3. Retrieve the analysis results anytime after the analysis is completed with hash for files (md5, sha1, sha256) by calling [Fetch processing result](#operation/userLogin). 
    - The hash can be found in the scan results

  4. Retrieve processed file (sanitized, redacted, watermarked, etc.) after the analysis is complete. 
    > _**Note**:_ Based on the configured retention policy, the files might be available for retrieval at a later time. 

- --
OPSWAT provides some sample codes on [GitHub](https://github.com/OPSWAT) to make it easier to understand how the MetaDefender REST API works.


This C# SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: v4.18.0
- SDK version: 1.0.0
- Build package: org.openapitools.codegen.languages.CSharpClientCodegen
    For more information, please visit [https://github.com/OPSWAT/metadefender-core-openapi3](https://github.com/OPSWAT/metadefender-core-openapi3)

## Frameworks supported


- .NET 4.0 or later
- Windows Phone 7.1 (Mango)

## Dependencies


- [RestSharp](https://www.nuget.org/packages/RestSharp) - 105.1.0 or later
- [Json.NET](https://www.nuget.org/packages/Newtonsoft.Json/) - 7.0.0 or later
- [JsonSubTypes](https://www.nuget.org/packages/JsonSubTypes/) - 1.2.0 or later

The DLLs included in the package may not be the latest version. We recommend using [NuGet](https://docs.nuget.org/consume/installing-nuget) to obtain the latest version of the packages:

```
Install-Package RestSharp
Install-Package Newtonsoft.Json
Install-Package JsonSubTypes
```

NOTE: RestSharp versions greater than 105.1.0 have a bug which causes file uploads to fail. See [RestSharp#742](https://github.com/restsharp/RestSharp/issues/742)

## Installation

Run the following command to generate the DLL

- [Mac/Linux] `/bin/sh build.sh`
- [Windows] `build.bat`

Then include the DLL (under the `bin` folder) in the C# project, and use the namespaces:

```csharp
using Org.OpenAPITools.Api;
using Org.OpenAPITools.Client;
using Org.OpenAPITools.Model;

```


## Packaging

A `.nuspec` is included with the project. You can follow the Nuget quickstart to [create](https://docs.microsoft.com/en-us/nuget/quickstart/create-and-publish-a-package#create-the-package) and [publish](https://docs.microsoft.com/en-us/nuget/quickstart/create-and-publish-a-package#publish-the-package) packages.

This `.nuspec` uses placeholders from the `.csproj`, so build the `.csproj` directly:

```
nuget pack -Build -OutputDirectory out Org.OpenAPITools.csproj
```

Then, publish to a [local feed](https://docs.microsoft.com/en-us/nuget/hosting-packages/local-feeds) or [other host](https://docs.microsoft.com/en-us/nuget/hosting-packages/overview) and consume the new package via Nuget as usual.


## Getting Started

```csharp
using System.Collections.Generic;
using System.Diagnostics;
using Org.OpenAPITools.Api;
using Org.OpenAPITools.Client;
using Org.OpenAPITools.Model;

namespace Example
{
    public class Example
    {
        public static void Main()
        {

            Configuration.Default.BasePath = "http://localhost:8008";
            // Configure API key authorization: apikey
            Configuration.Default.ApiKey.Add("apikey", "YOUR_API_KEY");
            // Uncomment below to setup prefix (e.g. Bearer) for API key, if needed
            // Configuration.Default.ApiKeyPrefix.Add("apikey", "Bearer");

            var apiInstance = new AdminApi(Configuration.Default);
            var apikey = apikey_example;  // string | Generated `session_id` from [Login](#operation/userLogin) call can be used as an `apikey` for API calls that require authentication.                 (optional) 
            var body = body_example;  // System.IO.Stream |  (optional) 

            try
            {
                // Import configuration
                InlineResponse2006 result = apiInstance.AdminImport(apikey, body);
                Debug.WriteLine(result);
            }
            catch (ApiException e)
            {
                Debug.Print("Exception when calling AdminApi.AdminImport: " + e.Message );
                Debug.Print("Status Code: "+ e.ErrorCode);
                Debug.Print(e.StackTrace);
            }

        }
    }
}
```

## Documentation for API Endpoints

All URIs are relative to *http://localhost:8008*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*AdminApi* | [**AdminImport**](docs/AdminApi.md#adminimport) | **POST** /admin/import | Import configuration
*AdminApi* | [**RoleCreate**](docs/AdminApi.md#rolecreate) | **POST** /admin/role | Create new role
*AdminApi* | [**UserCreate**](docs/AdminApi.md#usercreate) | **POST** /admin/user | Create user
*AnalysisApi* | [**AnalysisRules**](docs/AnalysisApi.md#analysisrules) | **GET** /file/rules | Fetching Available Analysis Rules
*AnalysisApi* | [**FileAnalysisCancel**](docs/AnalysisApi.md#fileanalysiscancel) | **POST** /file/{data_id}/cancel | Cancel File Analysis
*AnalysisApi* | [**FileAnalysisGet**](docs/AnalysisApi.md#fileanalysisget) | **GET** /file/{data_id} | Fetch Analysis Result
*AnalysisApi* | [**FileAnalysisPost**](docs/AnalysisApi.md#fileanalysispost) | **POST** /file | Analyze File
*AnalysisApi* | [**SanitizedFile**](docs/AnalysisApi.md#sanitizedfile) | **GET** /file/converted/{data_id} | Download Sanitized Files
*AnalysisApi* | [**WebhookStatus**](docs/AnalysisApi.md#webhookstatus) | **GET** /file/webhook/{data_id} | Query webhook status
*AuthApi* | [**UserChangePass**](docs/AuthApi.md#userchangepass) | **POST** /user/changepassword | Change Password
*AuthApi* | [**UserLogin**](docs/AuthApi.md#userlogin) | **POST** /login | Login
*AuthApi* | [**UserLogout**](docs/AuthApi.md#userlogout) | **POST** /logout | Logout
*BatchApi* | [**BatchCancel**](docs/BatchApi.md#batchcancel) | **POST** /file/{batchId}/cancel | Cancel Batch
*BatchApi* | [**BatchClose**](docs/BatchApi.md#batchclose) | **POST** /file/batch/{batchId}/close | Close Batch
*BatchApi* | [**BatchCreate**](docs/BatchApi.md#batchcreate) | **POST** /file/batch | Initiate Batch
*BatchApi* | [**BatchSignedResult**](docs/BatchApi.md#batchsignedresult) | **GET** /file/batch/{batchId}/certificate | Download Signed Batch Result
*BatchApi* | [**BatchStatus**](docs/BatchApi.md#batchstatus) | **GET** /file/batch/{batchId} | Status of Batch Analysis
*ConfigApi* | [**ConfigAuditLog**](docs/ConfigApi.md#configauditlog) | **PUT** /admin/config/auditlog | Audit clean up
*ConfigApi* | [**ConfigGetSkipHash**](docs/ConfigApi.md#configgetskiphash) | **GET** /admin/config/skip | Get 'skip by hash' list
*ConfigApi* | [**ConfigQuarantine**](docs/ConfigApi.md#configquarantine) | **PUT** /admin/config/quarantine | Quarantine clean up
*ConfigApi* | [**ConfigSanitizedRepo**](docs/ConfigApi.md#configsanitizedrepo) | **PUT** /admin/config/sanitize | Sanitized files clean up
*ConfigApi* | [**ConfigScanHistory**](docs/ConfigApi.md#configscanhistory) | **PUT** /admin/config/scanhistory | Processing history clean up
*ConfigApi* | [**ConfigSession**](docs/ConfigApi.md#configsession) | **PUT** /admin/config/session | Session settings
*ConfigApi* | [**ConfigUpdate**](docs/ConfigApi.md#configupdate) | **PUT** /admin/config/update | Modules Update Source and Frequency
*ConfigApi* | [**ConfigUpdateSkipHash**](docs/ConfigApi.md#configupdateskiphash) | **PUT** /admin/config/skip | Modify 'skip by hash' list
*ConfigApi* | [**ConfigUpdateWebhook**](docs/ConfigApi.md#configupdatewebhook) | **PUT** /admin/config/webhook | Webhook set configuration
*ConfigApi* | [**ConfigWebhook**](docs/ConfigApi.md#configwebhook) | **GET** /admin/config/webhook | Webhook get configuration
*EnginesApi* | [**EngineDisable**](docs/EnginesApi.md#enginedisable) | **POST** /admin/engine/{engineId}/disable | Disable engines
*EnginesApi* | [**EngineEnable**](docs/EnginesApi.md#engineenable) | **POST** /admin/engine/{engineId}/enable | Enable engines
*EnginesApi* | [**EnginePin**](docs/EnginesApi.md#enginepin) | **POST** /admin/engine/{engineId}/pin | Pin engine to prevent auto-updates
*EnginesApi* | [**EngineUnpin**](docs/EnginesApi.md#engineunpin) | **POST** /admin/engine/{engineId}/unpin | Unpin engine to prevent auto-updates
*LicenseApi* | [**LicenseActivation**](docs/LicenseApi.md#licenseactivation) | **POST** /admin/license/activation | Activate license
*LicenseApi* | [**LicenseGet**](docs/LicenseApi.md#licenseget) | **GET** /admin/license | Get Current License Information
*LicenseApi* | [**LicenseUpload**](docs/LicenseApi.md#licenseupload) | **POST** /admin/license | Upload license key
*StatsApi* | [**EnginesStatus**](docs/StatsApi.md#enginesstatus) | **GET** /stat/engines | Engines Status
*StatsApi* | [**NodesStatus**](docs/StatsApi.md#nodesstatus) | **GET** /stat/nodes | Nodes Status
*StatsApi* | [**ProductVersion**](docs/StatsApi.md#productversion) | **GET** /version | Get Product Version
*YaraApi* | [**YaraPackageGenerate**](docs/YaraApi.md#yarapackagegenerate) | **PUT** /yara/generate | Generate Yara package
*YaraApi* | [**YaraPackageStatus**](docs/YaraApi.md#yarapackagestatus) | **GET** /yara/package | Yara Generation Status
*YaraApi* | [**YaraSourcesGet**](docs/YaraApi.md#yarasourcesget) | **GET** /admin/config/yara/sources | Get Yara sources
*YaraApi* | [**YaraSourcesPut**](docs/YaraApi.md#yarasourcesput) | **PUT** /admin/config/yara/sources | Modify Yara sources


## Documentation for Models

 - [Model.AVEngineScanReport](docs/AVEngineScanReport.md)
 - [Model.AdminConfigSession](docs/AdminConfigSession.md)
 - [Model.AdminConfigUpdate](docs/AdminConfigUpdate.md)
 - [Model.AdminConfigUpdateDisabledupdate](docs/AdminConfigUpdateDisabledupdate.md)
 - [Model.AdminConfigWebhook](docs/AdminConfigWebhook.md)
 - [Model.AnalysisResult](docs/AnalysisResult.md)
 - [Model.AnalysisResultProcessInfo](docs/AnalysisResultProcessInfo.md)
 - [Model.AnalysisResultProcessInfoPostProcessing](docs/AnalysisResultProcessInfoPostProcessing.md)
 - [Model.BatchId](docs/BatchId.md)
 - [Model.BatchResponse](docs/BatchResponse.md)
 - [Model.BatchResponseBatchFiles](docs/BatchResponseBatchFiles.md)
 - [Model.BatchResponseBatchFilesFilesInBatch](docs/BatchResponseBatchFilesFilesInBatch.md)
 - [Model.BatchResponseBatchFilesProcessInfo](docs/BatchResponseBatchFilesProcessInfo.md)
 - [Model.BatchResponseProcessInfo](docs/BatchResponseProcessInfo.md)
 - [Model.BatchResponseScanResults](docs/BatchResponseScanResults.md)
 - [Model.DLPResponse](docs/DLPResponse.md)
 - [Model.DLPResponseDlpInfo](docs/DLPResponseDlpInfo.md)
 - [Model.DLPResponseDlpInfoHits](docs/DLPResponseDlpInfoHits.md)
 - [Model.DLPResponseDlpInfoHitsCcn](docs/DLPResponseDlpInfoHitsCcn.md)
 - [Model.DLPResponseDlpInfoMetadataRemoval](docs/DLPResponseDlpInfoMetadataRemoval.md)
 - [Model.DLPResponseDlpInfoRedact](docs/DLPResponseDlpInfoRedact.md)
 - [Model.DLPResponseDlpInfoWatermark](docs/DLPResponseDlpInfoWatermark.md)
 - [Model.DLPRuleMatchResult](docs/DLPRuleMatchResult.md)
 - [Model.DeepCDRDetails](docs/DeepCDRDetails.md)
 - [Model.DeepCDRDetailsDetails](docs/DeepCDRDetailsDetails.md)
 - [Model.FileInformation](docs/FileInformation.md)
 - [Model.InlineObject](docs/InlineObject.md)
 - [Model.InlineObject1](docs/InlineObject1.md)
 - [Model.InlineObject2](docs/InlineObject2.md)
 - [Model.InlineResponse200](docs/InlineResponse200.md)
 - [Model.InlineResponse2001](docs/InlineResponse2001.md)
 - [Model.InlineResponse20010](docs/InlineResponse20010.md)
 - [Model.InlineResponse20011](docs/InlineResponse20011.md)
 - [Model.InlineResponse20012](docs/InlineResponse20012.md)
 - [Model.InlineResponse20013](docs/InlineResponse20013.md)
 - [Model.InlineResponse2002](docs/InlineResponse2002.md)
 - [Model.InlineResponse2003](docs/InlineResponse2003.md)
 - [Model.InlineResponse2004](docs/InlineResponse2004.md)
 - [Model.InlineResponse2005](docs/InlineResponse2005.md)
 - [Model.InlineResponse2006](docs/InlineResponse2006.md)
 - [Model.InlineResponse2007](docs/InlineResponse2007.md)
 - [Model.InlineResponse2007Issues](docs/InlineResponse2007Issues.md)
 - [Model.InlineResponse2007IssuesGeneral](docs/InlineResponse2007IssuesGeneral.md)
 - [Model.InlineResponse2007IssuesSource](docs/InlineResponse2007IssuesSource.md)
 - [Model.InlineResponse2008](docs/InlineResponse2008.md)
 - [Model.InlineResponse2009](docs/InlineResponse2009.md)
 - [Model.InlineResponse400](docs/InlineResponse400.md)
 - [Model.InlineResponse403](docs/InlineResponse403.md)
 - [Model.InlineResponse500](docs/InlineResponse500.md)
 - [Model.LicenseInformation](docs/LicenseInformation.md)
 - [Model.MetascanReport](docs/MetascanReport.md)
 - [Model.MetascanReportScanDetails](docs/MetascanReportScanDetails.md)
 - [Model.NewUserRoleRequest](docs/NewUserRoleRequest.md)
 - [Model.NewUserRoleRequestRights](docs/NewUserRoleRequestRights.md)
 - [Model.NewUserRoleResponse](docs/NewUserRoleResponse.md)
 - [Model.NewUserRoleResponseAllOf](docs/NewUserRoleResponseAllOf.md)
 - [Model.ProcessingResultsIndexEnum](docs/ProcessingResultsIndexEnum.md)
 - [Model.ProcessingResultsStringEnum](docs/ProcessingResultsStringEnum.md)
 - [Model.RolePermissionObject](docs/RolePermissionObject.md)
 - [Model.ScanResultEnum](docs/ScanResultEnum.md)
 - [Model.SkipList](docs/SkipList.md)
 - [Model.StatNodesEngines](docs/StatNodesEngines.md)
 - [Model.StatNodesIssues](docs/StatNodesIssues.md)
 - [Model.StatNodesStatuses](docs/StatNodesStatuses.md)
 - [Model.UserLogin](docs/UserLogin.md)
 - [Model.UserRequest](docs/UserRequest.md)
 - [Model.UserRequestAllOf](docs/UserRequestAllOf.md)
 - [Model.UserResponse](docs/UserResponse.md)
 - [Model.VulnerabilityResponse](docs/VulnerabilityResponse.md)
 - [Model.VulnerabilityResponseResult](docs/VulnerabilityResponseResult.md)
 - [Model.VulnerabilityResponseResultDetails](docs/VulnerabilityResponseResultDetails.md)
 - [Model.VulnerabilityResponseResultDetailsCvss](docs/VulnerabilityResponseResultDetailsCvss.md)
 - [Model.VulnerabilityResponseResultDetectedProduct](docs/VulnerabilityResponseResultDetectedProduct.md)
 - [Model.VulnerabilityResponseResultDetectedProductProduct](docs/VulnerabilityResponseResultDetectedProductProduct.md)
 - [Model.VulnerabilityResponseResultDetectedProductVendor](docs/VulnerabilityResponseResultDetectedProductVendor.md)
 - [Model.VulnerabilityResponseResultDetectedProductVersionData](docs/VulnerabilityResponseResultDetectedProductVersionData.md)
 - [Model.VulnerabilityResponseResultVulnerabilites](docs/VulnerabilityResponseResultVulnerabilites.md)
 - [Model.YaraReport](docs/YaraReport.md)
 - [Model.YaraSourcesObject](docs/YaraSourcesObject.md)
 - [Model.YaraSourcesObjectHttpSources](docs/YaraSourcesObjectHttpSources.md)
 - [Model.YaraSourcesObjectLocalSources](docs/YaraSourcesObjectLocalSources.md)


## Documentation for Authorization


### apikey

- **Type**: API key

- **API key parameter name**: apikey
- **Location**: HTTP header

